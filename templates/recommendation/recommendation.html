{% extends 'base.html' %}
{% block content %}

    <script src="https://code.jquery.com/jquery-latest.min.js"></script>
    <script type="text/javascript">
        function decodeHTMLEntities(text) {
            var entities = [
                ['amp', '&'],
                ['apos', '\''],
                ['#x27', '\''],
                ['#x2F', '/'],
                ['#39', '\''],
                ['#47', '/'],
                ['lt', '<'],
                ['gt', '>'],
                ['nbsp', ' '],
                ['quot', '"']
            ];

            for (var i = 0, max = entities.length; i < max; ++i)
                text = text.replace(new RegExp('&' + entities[i][0] + ';', 'g'), entities[i][1]);
            text = text.replace(/True/gi, 'true')
            text = text.replace(/False/gi, 'false')
            text = text.replace(/'/gi, '"')
            return text;
        }

        function decodeUnicode(unicodeString) {
            var r = /\\u([\d\w]{4})/gi;
            unicodeString = unicodeString.replace(r, function (match, grp) {
                return String.fromCharCode(parseInt(grp, 16));
            });
            return unescape(unicodeString);
        }

        let data = decodeUnicode(decodeHTMLEntities('{{ result }}'))
        data = data.replace('["', '')
        data = JSON.parse(data.replace('"]', ''))
        console.log(data)

    </script>
{% endblock %}